<div class="dashboard-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Loading your dashboard...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-state">
    <div class="error-icon">‚ö†Ô∏è</div>
    <p>{{ error }}</p>
    <button (click)="retryLoad()" class="btn btn-primary">Try Again</button>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!isLoading && !error && currentUser" class="dashboard-content">
    <!-- Welcome Header -->
    <header class="dashboard-header">
      <div class="welcome-section">
        <img [src]="currentUser.avatar" [alt]="currentUser.username" class="user-avatar-large">
        <div class="welcome-text">
          <h1>Welcome back, {{ currentUser.firstName }}!</h1>
          <p>Here's what's happening with your content</p>
        </div>
      </div>
      <div class="quick-actions">
        <a routerLink="/create-post" class="btn btn-primary">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" class="btn-icon">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
          </svg>
          New Post
        </a>
      </div>
    </header>

    <!-- Stats Cards -->
    <section class="stats-section">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon posts-icon">
            <svg fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <div class="stat-content">
            <h3>{{ stats.totalPosts }}</h3>
            <p>Total Posts</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon likes-icon">
            <svg fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <div class="stat-content">
            <h3>{{ stats.totalLikes }}</h3>
            <p>Total Likes</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon comments-icon">
            <svg fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <div class="stat-content">
            <h3>{{ stats.totalComments }}</h3>
            <p>Total Comments</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon views-icon">
            <svg fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
              <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <div class="stat-content">
            <h3>{{ stats.totalViews }}</h3>
            <p>Total Views</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Main Content Grid -->
    <div class="main-content-grid">
      <!-- Your Posts Section -->
      <section class="user-posts-section">
        <div class="section-header">
          <h2>Your Recent Posts</h2>
          <a routerLink="/my-posts" class="view-all-link">View All</a>
        </div>

        <div *ngIf="userPosts.length === 0" class="empty-state">
          <div class="empty-icon">üìù</div>
          <h3>No posts yet</h3>
          <p>Start sharing your thoughts with the community!</p>
          <a routerLink="/create-post" class="btn btn-primary">Create Your First Post</a>
        </div>

        <div *ngIf="userPosts.length > 0" class="posts-list">
          <div *ngFor="let post of userPosts.slice(0, 3); trackBy: trackByPostId" class="post-item">
            <div class="post-thumbnail">
              <img [src]="post.imageUrl" [alt]="post.title" loading="lazy">
            </div>
            <div class="post-info">
              <h4 class="post-title">
                <a [routerLink]="['/posts', post.id]">{{ post.title }}</a>
              </h4>
              <p class="post-excerpt">{{ post.excerpt }}</p>
              <div class="post-meta">
                <span class="post-date">{{ post.createdAt | date:'MMM d, y' }}</span>
                <div class="post-stats">
                  <span class="stat">‚ù§Ô∏è {{ post.likes }}</span>
                  <span class="stat">üí¨ {{ post.comments.length }}</span>
                </div>
              </div>
              <div class="post-actions">
                <a [routerLink]="['/edit-post', post.id]" class="action-link edit-link">Edit</a>
                <a [routerLink]="['/posts', post.id]" class="action-link view-link">View</a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Community Activity Section -->
      <section class="community-section">
        <div class="section-header">
          <h2>Community Activity</h2>
          <a routerLink="/posts" class="view-all-link">Browse All</a>
        </div>

        <div *ngIf="recentPosts.length === 0" class="empty-state">
          <div class="empty-icon">üåü</div>
          <p>No recent activity</p>
        </div>

        <div *ngIf="recentPosts.length > 0" class="activity-list">
          <div *ngFor="let post of recentPosts; trackBy: trackByPostId" class="activity-item">
            <img [src]="post.author.avatar" [alt]="post.author.username" class="activity-avatar">
            <div class="activity-content">
              <p class="activity-text">
                <strong>{{ post.author.username }}</strong> published
                <a [routerLink]="['/posts', post.id]" class="activity-link">{{ post.title }}</a>
              </p>
              <span class="activity-date">{{ post.createdAt | date:'MMM d, y' }}</span>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Quick Links Section -->
    <section class="quick-links-section">
      <h2>Quick Actions</h2>
      <div class="quick-links-grid">
        <a routerLink="/create-post" class="quick-link-card">
          <div class="quick-link-icon">‚úçÔ∏è</div>
          <h3>Write a Post</h3>
          <p>Share your thoughts with the community</p>
        </a>
        <a routerLink="/my-posts" class="quick-link-card">
          <div class="quick-link-icon">üìö</div>
          <h3>Manage Posts</h3>
          <p>Edit and organize your content</p>
        </a>
        <a routerLink="/profile" class="quick-link-card">
          <div class="quick-link-icon">üë§</div>
          <h3>Edit Profile</h3>
          <p>Update your personal information</p>
        </a>
        <a routerLink="/posts" class="quick-link-card">
          <div class="quick-link-icon">üåç</div>
          <h3>Explore</h3>
          <p>Discover new content and authors</p>
        </a>
      </div>
    </section>
  </div>
</div>
